<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux Shell文本处理 | LemonGo97のBlog</title><meta name="description" content="本文将介绍Linux下使用Shell处理文本时最常用的工具：find、grep、xargs、sort、uniq、tr、cut、paste、wc、sed、awk；提供的例子和参数都是最常用和最为实用的；我对shell脚本使用的原则是命令单行书写，尽量不要超过2行；如果有更为复杂的任务需求，还是考虑python吧； find 文件查找 查找txt和pdf文件 1find . \( -name &amp;quo"><meta name="keywords" content="Linux,Shell"><meta name="author" content="LemonGo97"><meta name="copyright" content="LemonGo97"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://blog.lemongo97.com/posts/a84c63b7/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><meta property="og:type" content="article"><meta property="og:title" content="Linux Shell文本处理"><meta property="og:url" content="https://blog.lemongo97.com/posts/a84c63b7/"><meta property="og:site_name" content="LemonGo97のBlog"><meta property="og:description" content="本文将介绍Linux下使用Shell处理文本时最常用的工具：find、grep、xargs、sort、uniq、tr、cut、paste、wc、sed、awk；提供的例子和参数都是最常用和最为实用的；我对shell脚本使用的原则是命令单行书写，尽量不要超过2行；如果有更为复杂的任务需求，还是考虑python吧； find 文件查找 查找txt和pdf文件 1find . \( -name &amp;quo"><meta property="og:image" content="https://lemongo97-blog-img.oss-cn-beijing.aliyuncs.com/3eb93c55a64067297eafa2aaa5b62a0f.jpeg"><meta property="article:published_time" content="2022-05-03T06:43:35.000Z"><meta property="article:modified_time" content="2022-05-03T06:43:35.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2022-05-03 14:43:35'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="LemonGo97のBlog" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="https://coding-net-production-static-ci.codehub.cn/d70d0fa9-08d5-4fc7-ba82-7b73fee22292.jpg?imageMogr2/auto-orient/format/jpeg/cut/700x700x0x0" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">60</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">39</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#find-%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE"><span class="toc-number">1.</span> <span class="toc-text">find 文件查找</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6%E6%90%9C%E7%B4%A2"><span class="toc-number">1.1.</span> <span class="toc-text">定制搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%BE%E5%88%B0%E5%90%8E%E7%9A%84%E5%90%8E%E7%BB%AD%E5%8A%A8%E4%BD%9C"><span class="toc-number">1.2.</span> <span class="toc-text">找到后的后续动作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#print%E7%9A%84%E5%AE%9A%E7%95%8C%E7%AC%A6"><span class="toc-number">1.3.</span> <span class="toc-text">-print的定界符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#grep-%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2"><span class="toc-number">2.</span> <span class="toc-text">grep 文本搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xargs-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.</span> <span class="toc-text">xargs 命令行参数转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#xargs%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="toc-number">3.1.</span> <span class="toc-text">xargs参数说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sort-%E6%8E%92%E5%BA%8F"><span class="toc-number">4.</span> <span class="toc-text">sort 排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#uniq-%E6%B6%88%E9%99%A4%E9%87%8D%E5%A4%8D%E8%A1%8C"><span class="toc-number">5.</span> <span class="toc-text">uniq 消除重复行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8tr%E8%BF%9B%E8%A1%8C%E8%BD%AC%E6%8D%A2"><span class="toc-number">6.</span> <span class="toc-text">用tr进行转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cut-%E6%8C%89%E5%88%97%E5%88%87%E5%88%86%E6%96%87%E6%9C%AC"><span class="toc-number">7.</span> <span class="toc-text">cut 按列切分文本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#paste-%E6%8C%89%E5%88%97%E6%8B%BC%E6%8E%A5%E6%96%87%E6%9C%AC"><span class="toc-number">8.</span> <span class="toc-text">paste 按列拼接文本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#wc-%E7%BB%9F%E8%AE%A1%E8%A1%8C%E5%92%8C%E5%AD%97%E7%AC%A6%E7%9A%84%E5%B7%A5%E5%85%B7"><span class="toc-number">9.</span> <span class="toc-text">wc 统计行和字符的工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed-%E6%96%87%E6%9C%AC%E6%9B%BF%E6%8D%A2%E5%88%A9%E5%99%A8"><span class="toc-number">10.</span> <span class="toc-text">sed 文本替换利器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk-%E6%95%B0%E6%8D%AE%E6%B5%81%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">11.</span> <span class="toc-text">awk 数据流处理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#print-%E6%89%93%E5%8D%B0%E5%BD%93%E5%89%8D%E8%A1%8C"><span class="toc-number">11.1.</span> <span class="toc-text">print 打印当前行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F%EF%BC%9A-NR-NF-0-1-2"><span class="toc-number">11.2.</span> <span class="toc-text">特殊变量： NR NF $0 $1 $2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">11.3.</span> <span class="toc-text">传递外部变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%A0%B7%E5%BC%8F%E5%AF%B9awk%E5%A4%84%E7%90%86%E7%9A%84%E8%A1%8C%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4"><span class="toc-number">11.4.</span> <span class="toc-text">用样式对awk处理的行进行过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AE%9A%E7%95%8C%E7%AC%A6"><span class="toc-number">11.5.</span> <span class="toc-text">设置定界符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E5%91%BD%E4%BB%A4%E8%BE%93%E5%87%BA"><span class="toc-number">11.6.</span> <span class="toc-text">读取命令输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8awk%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%BE%AA%E7%8E%AF"><span class="toc-number">11.7.</span> <span class="toc-text">在awk中使用循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#awk%E5%AE%9E%E7%8E%B0head%E3%80%81tail%E5%91%BD%E4%BB%A4"><span class="toc-number">11.8.</span> <span class="toc-text">awk实现head、tail命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%8C%87%E5%AE%9A%E5%88%97"><span class="toc-number">11.9.</span> <span class="toc-text">打印指定列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%8C%87%E5%AE%9A%E6%96%87%E6%9C%AC%E5%8C%BA%E5%9F%9F"><span class="toc-number">11.10.</span> <span class="toc-text">打印指定文本区域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#awk%E5%B8%B8%E7%94%A8%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">11.11.</span> <span class="toc-text">awk常用内建函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E8%A1%8C%E3%80%81%E5%8D%95%E8%AF%8D%E5%92%8C%E5%AD%97%E7%AC%A6"><span class="toc-number">12.</span> <span class="toc-text">迭代文件中的行、单词和字符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%BF%AD%E4%BB%A3%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%80%E8%A1%8C"><span class="toc-number">12.1.</span> <span class="toc-text">1.迭代文件中的每一行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%BF%AD%E4%BB%A3%E4%B8%80%E8%A1%8C%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%80%E4%B8%AA%E5%8D%95%E8%AF%8D"><span class="toc-number">12.2.</span> <span class="toc-text">2.迭代一行中的每一个单词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%BF%AD%E4%BB%A3%E6%AF%8F%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6"><span class="toc-number">12.3.</span> <span class="toc-text">3.迭代每一个字符</span></a></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://lemongo97-blog-img.oss-cn-beijing.aliyuncs.com/3eb93c55a64067297eafa2aaa5b62a0f.jpeg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">LemonGo97のBlog</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">【转载】 Linux Shell文本处理</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-03T06:43:35.000Z" title="发表于 2022-05-03 14:43:35">2022-05-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-03T06:43:35.000Z" title="更新于 2022-05-03 14:43:35">2022-05-03</time></span></div><div class="meta-secondline"> </div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>本文将介绍Linux下使用Shell处理文本时最常用的工具：<br>find、grep、xargs、sort、uniq、tr、cut、paste、wc、sed、awk；<br>提供的例子和参数都是最常用和最为实用的；<br>我对shell脚本使用的原则是命令单行书写，尽量不要超过2行；<br>如果有更为复杂的任务需求，还是考虑python吧；</p>
<h2 id="find-文件查找"><a href="#find-文件查找" class="headerlink" title="find 文件查找"></a>find 文件查找</h2><ul>
<li><p>查找txt和pdf文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . \( -name &quot;*.txt&quot; -o -name &quot;*.pdf&quot; \) -print</span><br></pre></td></tr></table></figure>
</li>
<li><p>正则方式查找.txt和pdf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -regex  &quot;.*\(\.txt|\.pdf\)$&quot;</span><br></pre></td></tr></table></figure>

<p>-iregex： 忽略大小写的正则</p>
</li>
<li><p>否定参数<br>查找所有非txt文本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . ! -name &quot;*.txt&quot; -print</span><br></pre></td></tr></table></figure>
</li>
<li><p>指定搜索深度<br>打印出当前目录的文件（深度为1）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -maxdepth 1 -type f </span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="定制搜索"><a href="#定制搜索" class="headerlink" title="定制搜索"></a>定制搜索</h3><ul>
<li><p>按类型搜索：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type d -print  //只列出所有目录</span><br></pre></td></tr></table></figure>

<p>-type f 文件 / l 符号链接</p>
</li>
<li><p>按时间搜索：<br>-atime 访问时间 (单位是天，分钟单位则是-amin，以下类似）<br>-mtime 修改时间 （内容被修改）<br>-ctime 变化时间 （元数据或权限变化）<br>最近7天被访问过的所有文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -atime 7 -type f -print</span><br></pre></td></tr></table></figure>
</li>
<li><p>按大小搜索：<br>w字 k M G<br>寻找大于2k的文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -size +2k</span><br></pre></td></tr></table></figure>

<p>按权限查找：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -perm 644 -print //找具有可执行权限的所有文件</span><br></pre></td></tr></table></figure>

<p>按用户查找：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -user weber -print// 找用户weber所拥有的文件</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="找到后的后续动作"><a href="#找到后的后续动作" class="headerlink" title="找到后的后续动作"></a>找到后的后续动作</h3><ul>
<li><p>删除：<br>删除当前目录下所有的swp文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -name &quot;*.swp&quot; -delete</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行动作（强大的exec）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -user root -exec chown weber &#123;&#125; \; //将当前目录下的所有权变更为weber</span><br></pre></td></tr></table></figure>

<p>注：{}是一个特殊的字符串，对于每一个匹配的文件，{}会被替换成相应的文件名；<br>eg：将找到的文件全都copy到另一个目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -mtime +10 -name &quot;*.txt&quot; -exec cp &#123;&#125; OLD \;</span><br></pre></td></tr></table></figure>
</li>
<li><p>结合多个命令<br>tips: 如果需要后续执行多个命令，可以将多个命令写成一个脚本。然后 -exec 调用时执行脚本即可；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-exec ./commands.sh &#123;&#125; \;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="print的定界符"><a href="#print的定界符" class="headerlink" title="-print的定界符"></a>-print的定界符</h3><p>默认使用’\n’作为文件的定界符；<br>-print0 使用’\0’作为文件的定界符，这样就可以搜索包含空格的文件；</p>
<h2 id="grep-文本搜索"><a href="#grep-文本搜索" class="headerlink" title="grep 文本搜索"></a>grep 文本搜索</h2><p>grep match_patten file // 默认访问匹配行</p>
<ul>
<li><p>常用参数<br>-o 只输出匹配的文本行 <strong>VS</strong> -v 只输出没有匹配的文本行<br>-c 统计文件中包含文本的次数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -c &quot;text&quot; filename</span><br></pre></td></tr></table></figure>

<p>-n 打印匹配的行号<br>-i 搜索时忽略大小写<br>-l 只打印文件名</p>
</li>
<li><p>在多级目录中对文本递归搜索(程序员搜代码的最爱）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;class&quot; . -R -n</span><br></pre></td></tr></table></figure>
</li>
<li><p>匹配多个模式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -e &quot;class&quot; -e &quot;vitural&quot; file</span><br></pre></td></tr></table></figure>
</li>
<li><p>grep输出以\0作为结尾符的文件名：（-z）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;test&quot; file* -lZ| xargs -0 rm</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="xargs-命令行参数转换"><a href="#xargs-命令行参数转换" class="headerlink" title="xargs 命令行参数转换"></a>xargs 命令行参数转换</h2><p>xargs 能够将输入数据转化为特定命令的命令行参数；这样，可以配合很多命令来组合使用。比如grep，比如find；</p>
<ul>
<li><p>将多行输出转化为单行输出<br>cat file.txt| xargs<br>\n 是多行文本间的定界符</p>
</li>
<li><p>将单行转化为多行输出<br>cat single.txt | xargs -n 3<br>-n：指定每行显示的字段数</p>
</li>
</ul>
<h3 id="xargs参数说明"><a href="#xargs参数说明" class="headerlink" title="xargs参数说明"></a>xargs参数说明</h3><p>-d 定义定界符 （默认为空格 多行的定界符为 \n）<br>-n 指定输出为多行<br>-I {} 指定替换字符串，这个字符串在xargs扩展时会被替换掉,用于待执行的命令需要多个参数时<br>eg：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file.txt | xargs -I &#123;&#125; ./command.sh -p &#123;&#125; -1</span><br></pre></td></tr></table></figure>

<p>-0：指定\0为输入定界符<br>eg：统计程序行数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find source_dir/ -type f -name &quot;*.cpp&quot; -print0 |xargs -0 wc -l</span><br></pre></td></tr></table></figure>

<h2 id="sort-排序"><a href="#sort-排序" class="headerlink" title="sort 排序"></a>sort 排序</h2><p>字段说明：<br>-n 按数字进行排序 VS -d 按字典序进行排序<br>-r 逆序排序<br>-k N 指定按第N列排序<br>eg：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sort -nrk 1 data.txt</span><br><span class="line">sort -bd data // 忽略像空格之类的前导空白字符</span><br></pre></td></tr></table></figure>

<h2 id="uniq-消除重复行"><a href="#uniq-消除重复行" class="headerlink" title="uniq 消除重复行"></a>uniq 消除重复行</h2><ul>
<li><p>消除重复行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort unsort.txt | uniq </span><br></pre></td></tr></table></figure>
</li>
<li><p>统计各行在文件中出现的次数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort unsort.txt | uniq -c</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出重复行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort unsort.txt | uniq -d</span><br></pre></td></tr></table></figure>
<p>可指定每行中需要比较的重复内容：-s 开始位置 -w 比较字符数</p>
</li>
</ul>
<h2 id="用tr进行转换"><a href="#用tr进行转换" class="headerlink" title="用tr进行转换"></a>用tr进行转换</h2><ul>
<li><p>通用用法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo 12345 | tr &#x27;0-9&#x27; &#x27;9876543210&#x27; //加解密转换，替换对应字符</span><br><span class="line"> cat text| tr &#x27;\t&#x27; &#x27; &#x27;  //制表符转空格</span><br></pre></td></tr></table></figure>
</li>
<li><p>tr删除字符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -d &#x27;0-9&#x27; // 删除所有数字</span><br></pre></td></tr></table></figure>

<p>-c 求补集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -c &#x27;0-9&#x27; //获取文件中所有数字</span><br><span class="line"> cat file | tr -d -c &#x27;0-9 \n&#x27;  //删除非数字数据</span><br></pre></td></tr></table></figure>
</li>
<li><p>tr压缩字符<br>tr -s 压缩文本中出现的重复字符；最常用于压缩多余的空格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -s &#x27; &#x27;</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符类<br>tr中可用各种字符类：<br>alnum：字母和数字<br>alpha：字母<br>digit：数字<br>space：空白字符<br>lower：小写<br>upper：大写<br>cntrl：控制（非可打印）字符<br>print：可打印字符<br>使用方法：tr [:class:] [:class:]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eg: tr &#x27;[:lower:]&#x27; &#x27;[:upper:]&#x27;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="cut-按列切分文本"><a href="#cut-按列切分文本" class="headerlink" title="cut 按列切分文本"></a>cut 按列切分文本</h2><ul>
<li><p>截取文件的第2列和第4列：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -f2,4 filename</span><br></pre></td></tr></table></figure>
</li>
<li><p>去文件除第3列的所有列：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -f3 --complement filename</span><br></pre></td></tr></table></figure>
</li>
<li><p>-d 指定定界符：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -f2 -d&quot;;&quot; filename</span><br></pre></td></tr></table></figure>
</li>
<li><p>cut 取的范围<br>N- 第N个字段到结尾<br>-M 第1个字段为M<br>N-M N到M个字段</p>
</li>
<li><p>cut 取的单位<br>-b 以字节为单位<br>-c 以字符为单位<br>-f 以字段为单位（使用定界符）</p>
</li>
<li><p>eg:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cut -c1-5 file //打印第一到5个字符</span><br><span class="line"> cut -c-2 file  //打印前2个字符</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="paste-按列拼接文本"><a href="#paste-按列拼接文本" class="headerlink" title="paste 按列拼接文本"></a>paste 按列拼接文本</h2><p>将两个文本按列拼接到一起;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat file1</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">cat file2</span><br><span class="line">colin</span><br><span class="line">book</span><br><span class="line"></span><br><span class="line">paste file1 file2</span><br><span class="line">1 colin</span><br><span class="line">2 book</span><br></pre></td></tr></table></figure>

<p>默认的定界符是制表符，可以用-d指明定界符<br>paste file1 file2 -d “,”<br>1,colin<br>2,book</p>
<h2 id="wc-统计行和字符的工具"><a href="#wc-统计行和字符的工具" class="headerlink" title="wc 统计行和字符的工具"></a>wc 统计行和字符的工具</h2><p>wc -l file // 统计行数<br>wc -w file // 统计单词数<br>wc -c file // 统计字符数</p>
<h2 id="sed-文本替换利器"><a href="#sed-文本替换利器" class="headerlink" title="sed 文本替换利器"></a>sed 文本替换利器</h2><ul>
<li><p>首处替换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seg &#x27;s/text/replace_text/&#x27; file   //替换每一行的第一处匹配的text</span><br></pre></td></tr></table></figure>
</li>
<li><p>全局替换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seg &#x27;s/text/replace_text/g&#x27; file</span><br></pre></td></tr></table></figure>

<p>默认替换后，输出替换后的内容，如果需要直接替换原文件,使用-i：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seg -i &#x27;s/text/repalce_text/g&#x27; file</span><br></pre></td></tr></table></figure>
</li>
<li><p>移除空白行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;/^$/d&#x27; file</span><br></pre></td></tr></table></figure>
</li>
<li><p>变量转换<br>已匹配的字符串通过标记&amp;来引用.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo this is en example | seg &#x27;s/\w+/[&amp;]/g&#x27;</span><br><span class="line">$&gt;[this]  [is] [en] [example]</span><br></pre></td></tr></table></figure>
</li>
<li><p>子串匹配标记<br>第一个匹配的括号内容使用标记 \1 来引用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/hello\([0-9]\)/\1/&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li><p>双引号求值<br>sed通常用单引号来引用；也可使用双引号，使用双引号后，双引号会对表达式求值：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/$var/HLLOE/&#x27; </span><br></pre></td></tr></table></figure>

<p>当使用双引号时，我们可以在sed样式和替换字符串中指定变量；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">eg:</span><br><span class="line">p=patten</span><br><span class="line">r=replaced</span><br><span class="line">echo &quot;line con a patten&quot; | sed &quot;s/$p/$r/g&quot;</span><br><span class="line">$&gt;line con a replaced</span><br></pre></td></tr></table></figure>
</li>
<li><p>其它示例<br>字符串插入字符：将文本中每行内容（PEKSHA） 转换为 PEK/SHA</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/^.\&#123;3\&#125;/&amp;\//g&#x27; file</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="awk-数据流处理工具"><a href="#awk-数据流处理工具" class="headerlink" title="awk 数据流处理工具"></a>awk 数据流处理工具</h2><ul>
<li><p>awk脚本结构<br>awk ‘ BEGIN{ statements } statements2 END{ statements } ‘</p>
</li>
<li><p>工作方式<br>1.执行begin中语句块；<br>2.从文件或stdin中读入一行，然后执行statements2，重复这个过程，直到文件全部被读取完毕；<br>3.执行end语句块；</p>
</li>
</ul>
<h3 id="print-打印当前行"><a href="#print-打印当前行" class="headerlink" title="print 打印当前行"></a>print 打印当前行</h3><ul>
<li><p>使用不带参数的print时，会打印当前行;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e &quot;line1\nline2&quot; | awk &#x27;BEGIN&#123;print &quot;start&quot;&#125; &#123;print &#125; END&#123; print &quot;End&quot; &#125;&#x27; </span><br></pre></td></tr></table></figure>
</li>
<li><p>print 以逗号分割时，参数以空格定界;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo | awk &#x27; &#123;var1 = &quot;v1&quot; ; var2 = &quot;V2&quot;; var3=&quot;v3&quot;; \</span><br><span class="line">print var1, var2 , var3; &#125;&#x27;</span><br><span class="line">$&gt;v1 V2 v3</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用-拼接符的方式（””作为拼接符）;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo | awk &#x27; &#123;var1 = &quot;v1&quot; ; var2 = &quot;V2&quot;; var3=&quot;v3&quot;; \</span><br><span class="line">print var1&quot;-&quot;var2&quot;-&quot;var3; &#125;&#x27;</span><br><span class="line">$&gt;v1-V2-v3</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="特殊变量：-NR-NF-0-1-2"><a href="#特殊变量：-NR-NF-0-1-2" class="headerlink" title="特殊变量： NR NF $0 $1 $2"></a>特殊变量： NR NF $0 $1 $2</h3><p>NR:表示记录数量，在执行过程中对应当前行号；<br>NF:表示字段数量，在执行过程总对应当前行的字段数；<br>$0:这个变量包含执行过程中当前行的文本内容；<br>$1:第一个字段的文本内容；<br>$2:第二个字段的文本内容；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e &quot;line1 f2 f3\n line2 \n line 3&quot; | awk &#x27;&#123;print NR&quot;:&quot;$0&quot;-&quot;$1&quot;-&quot;$2&#125;&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>打印每一行的第二和第三个字段：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print $2, $3&#125;&#x27; file</span><br></pre></td></tr></table></figure>
</li>
<li><p>统计文件的行数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27; END &#123;print NR&#125;&#x27; file</span><br></pre></td></tr></table></figure>
</li>
<li><p>累加每一行的第一个字段：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo -e &quot;1\n 2\n 3\n 4\n&quot; | awk &#x27;BEGIN&#123;num = 0 ;</span><br><span class="line"> print &quot;begin&quot;;&#125; &#123;sum += $1;&#125; END &#123;print &quot;==&quot;; print sum &#125;&#x27;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="传递外部变量"><a href="#传递外部变量" class="headerlink" title="传递外部变量"></a>传递外部变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=1000</span><br><span class="line">echo | awk &#x27;&#123;print vara&#125;&#x27; vara=$var #  输入来自stdin</span><br><span class="line">awk &#x27;&#123;print vara&#125;&#x27; vara=$var file # 输入来自文件</span><br></pre></td></tr></table></figure>

<h3 id="用样式对awk处理的行进行过滤"><a href="#用样式对awk处理的行进行过滤" class="headerlink" title="用样式对awk处理的行进行过滤"></a>用样式对awk处理的行进行过滤</h3><p>awk ‘NR &lt; 5’ #行号小于5<br>awk ‘NR==1,NR==4 {print}’ file #行号等于1和4的打印出来<br>awk ‘/linux/‘ #包含linux文本的行（可以用正则表达式来指定，超级强大）<br>awk ‘!/linux/‘ #不包含linux文本的行</p>
<h3 id="设置定界符"><a href="#设置定界符" class="headerlink" title="设置定界符"></a>设置定界符</h3><p>使用-F来设置定界符（默认为空格）<br>awk -F: ‘{print $NF}’ /etc/passwd</p>
<h3 id="读取命令输出"><a href="#读取命令输出" class="headerlink" title="读取命令输出"></a>读取命令输出</h3><p>使用getline，将外部shell命令的输出读入到变量cmdout中；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo | awk &#x27;&#123;&quot;grep root /etc/passwd&quot; | getline cmdout; print cmdout &#125;&#x27; </span><br></pre></td></tr></table></figure>

<h3 id="在awk中使用循环"><a href="#在awk中使用循环" class="headerlink" title="在awk中使用循环"></a>在awk中使用循环</h3><p>for(i=0;i&lt;10;i++){print $i;}<br>for(i in array){print array[i];}</p>
<p>eg:<br>以逆序的形式打印行：(tac命令的实现）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">seq 9| \</span><br><span class="line">awk &#x27;&#123;lifo[NR] = $0; lno=NR&#125; \</span><br><span class="line">END&#123; for(;lno&gt;-1;lno--)&#123;print lifo[lno];&#125;</span><br><span class="line">&#125; &#x27;</span><br></pre></td></tr></table></figure>

<h3 id="awk实现head、tail命令"><a href="#awk实现head、tail命令" class="headerlink" title="awk实现head、tail命令"></a>awk实现head、tail命令</h3><ul>
<li><p>head:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;NR&lt;=10&#123;print&#125;&#x27; filename</span><br></pre></td></tr></table></figure>
</li>
<li><p>tail:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;buffer[NR%10] = $0;&#125; END&#123;for(i=0;i&lt;11;i++)&#123; \</span><br><span class="line"> print buffer[i %10]&#125; &#125; &#x27; filename</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="打印指定列"><a href="#打印指定列" class="headerlink" title="打印指定列"></a>打印指定列</h3><ul>
<li>awk方式实现：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lrt | awk &#x27;&#123;print $6&#125;&#x27;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li>cut方式实现<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lrt | cut -f6</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="打印指定文本区域"><a href="#打印指定文本区域" class="headerlink" title="打印指定文本区域"></a>打印指定文本区域</h3><ul>
<li><p>确定行号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seq 100| awk &#x27;NR==4,NR==6&#123;print&#125;&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li><p>确定文本<br>打印处于start_pattern 和end_pattern之间的文本；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;/start_pattern/, /end_pattern/&#x27; filename</span><br></pre></td></tr></table></figure>
<p>eg:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seq 100 | awk &#x27;/13/,/15/&#x27;</span><br><span class="line">cat /etc/passwd| awk &#x27;/mai.*mail/,/news.*news/&#x27;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="awk常用内建函数"><a href="#awk常用内建函数" class="headerlink" title="awk常用内建函数"></a>awk常用内建函数</h3><p>index(string,search_string):返回search_string在string中出现的位置<br>sub(regex,replacement_str,string):将正则匹配到的第一处内容替换为replacement_str;<br>match(regex,string):检查正则表达式是否能够匹配字符串；<br>length(string)：返回字符串长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo | awk &#x27;&#123;&quot;grep root /etc/passwd&quot; | getline cmdout; print length(cmdout) &#125;&#x27; </span><br></pre></td></tr></table></figure>

<p>printf 类似c语言中的printf，对输出进行格式化<br>eg：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seq 10 | awk &#x27;&#123;printf &quot;-&gt;%4s\n&quot;, $1&#125;&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="迭代文件中的行、单词和字符"><a href="#迭代文件中的行、单词和字符" class="headerlink" title="迭代文件中的行、单词和字符"></a>迭代文件中的行、单词和字符</h2><h3 id="1-迭代文件中的每一行"><a href="#1-迭代文件中的每一行" class="headerlink" title="1.迭代文件中的每一行"></a>1.迭代文件中的每一行</h3><ul>
<li><p>while 循环法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">while read line;</span><br><span class="line">do</span><br><span class="line">echo $line;</span><br><span class="line">done &lt; file.txt</span><br><span class="line">改成子shell:</span><br><span class="line">cat file.txt | (while read line;do echo $line;done)</span><br></pre></td></tr></table></figure>
</li>
<li><p>awk法：<br>cat file.txt| awk ‘{print}’</p>
</li>
</ul>
<h3 id="2-迭代一行中的每一个单词"><a href="#2-迭代一行中的每一个单词" class="headerlink" title="2.迭代一行中的每一个单词"></a>2.迭代一行中的每一个单词</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for word in $line;</span><br><span class="line">do </span><br><span class="line">echo $word;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="3-迭代每一个字符"><a href="#3-迭代每一个字符" class="headerlink" title="3.迭代每一个字符"></a>3.迭代每一个字符</h3><p>${string:start_pos:num_of_chars}：从字符串中提取一个字符；(bash文本切片)</p>
<p>${&#35;word}:返回变量word的长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for((i=0;i&lt;$&#123;#word&#125;;i++))</span><br><span class="line">do</span><br><span class="line">echo $&#123;word:i:1);</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>本文为《linux Shell脚本攻略》的读书笔记，文中主要内容和示例来自于 <a target="_blank" rel="noopener" href="http://www.amazon.cn/Linux-Shell%E8%84%9A%E6%9C%AC%E6%94%BB%E7%95%A5-%E6%8B%89%E5%85%8B%E4%BB%80%E6%9B%BC/dp/B0060FSIE4?SubscriptionId=AKIAJOMEZLLKFEWYT4PQ&tag=z08-23&linkCode=xm2&camp=2025&creative=165953&creativeASIN=B0060FSIE4" title="Linux Shell脚本攻略">《linux Shell脚本攻略》</a>；</p>
<p>本文转自 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/me115/p/3427319.html">https://www.cnblogs.com/me115/p/3427319.html</a>，如有侵权，请联系删除。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/me115">大CC</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/me115/p/3427319.html">https://www.cnblogs.com/me115/p/3427319.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.lemongo97.com" target="_blank">LemonGo97のBlog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/Shell/">Shell</a></div><div class="post_share"><div class="social-share" data-image="https://lemongo97-blog-img.oss-cn-beijing.aliyuncs.com/3eb93c55a64067297eafa2aaa5b62a0f.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/66a2f2c2/"><img class="prev-cover" data-lazy-src="https://lemongo97-blog-img.oss-cn-beijing.aliyuncs.com/20201124192103.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux I/O 那些事儿</div></div></a></div><div class="next-post pull-right"><a href="/posts/9b6ac726/"><img class="next-cover" data-lazy-src="https://lemongo97-blog-img.oss-cn-beijing.aliyuncs.com/default_cover_1.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">一篇详文带你入门 Redis</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/posts/6cf05f2f/" title="Firewalld 防火墙示例，完整的入门指南"><img class="relatedPosts_cover" data-lazy-src="https://lemongo97-blog-img.oss-cn-beijing.aliyuncs.com/20201124192103.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-05</div><div class="relatedPosts_title">Firewalld 防火墙示例，完整的入门指南</div></div></a></div><div class="relatedPosts_item"><a href="/posts/a10ff556/" title="Linux中检查本地系统上的开放端口列表的方法"><img class="relatedPosts_cover" data-lazy-src="https://lemongo97-blog-img.oss-cn-beijing.aliyuncs.com/20201124192103.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-24</div><div class="relatedPosts_title">Linux中检查本地系统上的开放端口列表的方法</div></div></a></div><div class="relatedPosts_item"><a href="/posts/66a2f2c2/" title="Linux I/O 那些事儿"><img class="relatedPosts_cover" data-lazy-src="https://lemongo97-blog-img.oss-cn-beijing.aliyuncs.com/20201124192103.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-03</div><div class="relatedPosts_title">Linux I/O 那些事儿</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By LemonGo97</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/instant.page/5.1.0/instantpage.min.js" type="module" defer></script><script src="https://cdn.bootcdn.net/ajax/libs/vanilla-lazyload/17.3.1/lazyload.iife.min.js" async></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    window.valine = new Valine({
      el: '#vcomment',
      appId: 'w7vT5VedMPyGHyDYppcacmtw-gzGzoHsz',
      appKey: 'YxBl09Aj50g5Ld621aydI4pz',
      placeholder: '来和大家一起讨论吧！',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    });
    if ('nick,mail') { valine.config.requiredFields= 'nick,mail'.split(',') }
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div></div></body></html>